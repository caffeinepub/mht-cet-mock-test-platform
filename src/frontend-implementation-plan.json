{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Make explanation field optional in question creation",
  "requirements": [
    {
      "id": "REQ-91",
      "summary": "Make explanation field optional in AdminQuestionCreate form by removing required validation and updating UI to indicate optional status",
      "acceptanceCriteria": [
        "The explanation field in the question creation form is marked as optional",
        "Form validation does not require explanation text to be provided",
        "Questions can be successfully created without providing an explanation",
        "The form UI indicates that explanation is optional (e.g., with '(optional)' label)"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/AdminQuestionCreate.tsx",
          "operation": "modify",
          "description": "Remove required validation from the explanation textarea field. Update the field label to indicate it is optional by adding '(optional)' text. Allow form submission when explanation is empty by removing any validation rules that enforce its presence. The explanation field should accept null or empty string values and pass them to the backend createQuestion mutation."
        },
        {
          "path": "frontend/src/hooks/useQuestionMutations.ts",
          "operation": "modify",
          "description": "Update the createQuestion mutation to accept explanation as an optional parameter (string | null). Ensure the mutation correctly passes null or empty explanation values to the backend actor's createQuestion method without throwing validation errors."
        }
      ]
    },
    {
      "id": "REQ-94",
      "summary": "Handle questions with null/missing explanations gracefully in ResultPage and TestInterface by hiding explanation sections when no explanation exists",
      "acceptanceCriteria": [
        "Questions without explanations display properly in the result review section",
        "No explanation text is shown when the field is null or empty",
        "The UI remains visually consistent whether explanation exists or not"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/ResultPage.tsx",
          "operation": "modify",
          "description": "Add conditional rendering logic to hide the explanation section when question.explanation is null, undefined, or empty string. Ensure the question breakdown display remains properly formatted and visually consistent when explanations are missing. Use optional chaining and nullish checks to safely access the explanation field."
        },
        {
          "path": "frontend/src/pages/TestInterface.tsx",
          "operation": "modify",
          "description": "Add conditional rendering to hide or omit explanation display when question.explanation is null, undefined, or empty. Ensure the test interface handles optional explanations gracefully without breaking the UI layout or causing rendering errors."
        }
      ]
    },
    {
      "id": "REQ-95",
      "summary": "Update PDF export utility to handle questions with null/missing explanations by omitting explanation rows when no explanation is provided",
      "acceptanceCriteria": [
        "PDF generation succeeds for tests containing questions without explanations",
        "The explanation section is omitted from the PDF for questions with null explanation",
        "PDF layout remains properly formatted when explanations are missing"
      ],
      "file_operations": [
        {
          "path": "frontend/src/utils/pdfExport.ts",
          "operation": "modify",
          "description": "Add conditional logic to skip rendering the explanation row in the question breakdown section when question.explanation is null, undefined, or empty string. Ensure the PDF HTML generation handles missing explanations gracefully and maintains proper formatting. Use optional chaining and nullish checks when accessing the explanation field to prevent errors during PDF generation."
        }
      ]
    }
  ]
}