{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Implement Result Page with Score Display and Question Review",
  "requirements": [
    {
      "id": "REQ-46",
      "summary": "Update ResultPage to fetch test attempt data using attemptId from URL parameters",
      "acceptanceCriteria": [
        "ResultPage component extracts attemptId from URL parameters",
        "Component uses useTestAttemptById hook to fetch test attempt data",
        "Loading state is displayed while fetching attempt data",
        "Error state is shown if attempt data cannot be fetched"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add useTestAttemptById hook that accepts attemptId parameter and returns the test attempt data including testId, userId, section1Score, section2Score, section1Answers, section2Answers, section1StartTime, section1SubmittedAt, section2StartTime, and section2SubmittedAt by calling actor.getTestAttempt(attemptId). Include proper loading and error states."
        },
        {
          "path": "frontend/src/pages/ResultPage.tsx",
          "operation": "modify",
          "description": "Replace placeholder implementation with real functionality: extract attemptId from URL parameters using useParams hook, call useTestAttemptById(attemptId) to fetch attempt data, display loading spinner while fetching, show error message if fetch fails or attempt not found, and ensure the component requires authentication before displaying any data."
        }
      ]
    },
    {
      "id": "REQ-47",
      "summary": "Display overall test score summary with section scores, total time, and performance indicator",
      "acceptanceCriteria": [
        "Overall score displays sum of section1Score and section2Score",
        "Section 1 score is displayed separately",
        "Section 2 score is displayed separately",
        "Total time taken is calculated and displayed in readable format (e.g., '2h 45m')",
        "Performance indicator is shown based on score percentage"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/ResultPage.tsx",
          "operation": "modify",
          "description": "Add score summary section that displays: total score (section1Score + section2Score), individual section scores labeled as 'Section 1: X marks' and 'Section 2: Y marks', total time taken calculated from (section1SubmittedAt - section1StartTime) + (section2SubmittedAt - section2StartTime) formatted as human-readable duration (e.g., '2h 45m'), and performance indicator label ('Excellent' for 80%+, 'Good' for 60-79%, 'Needs Improvement' for below 60%) based on percentage score. Style the summary section prominently using Concept Delta navy blue theme with Card components from shadcn/ui."
        }
      ]
    },
    {
      "id": "REQ-48",
      "summary": "Fetch full test details and display statistics for both sections separately",
      "acceptanceCriteria": [
        "Test details with assigned questions are fetched using useFullSyllabusTestById hook",
        "Section 1 statistics display: total questions, attempted, correct, incorrect, unanswered",
        "Section 2 statistics display: total questions, attempted, correct, incorrect, unanswered",
        "Statistics are calculated by comparing submitted answers against correct answers"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add useFullSyllabusTestById hook that accepts testId parameter and returns the full test details including assigned questions for both sections by calling actor.getFullSyllabusTests() and filtering by testId. Include proper error handling if test is not found."
        },
        {
          "path": "frontend/src/pages/ResultPage.tsx",
          "operation": "modify",
          "description": "Call useFullSyllabusTestById(testId) where testId comes from the test attempt data. For each section, calculate and display statistics: total questions (length of section.questionIds), attempted (count of answers submitted for that section), correct answers (by comparing submitted answers' selectedOptionIndex against question.correctAnswerIndex), incorrect answers (attempted - correct), and unanswered questions (total - attempted). Display statistics in separate cards/sections for Section 1 and Section 2."
        }
      ]
    },
    {
      "id": "REQ-49",
      "summary": "Implement question review section displaying all questions with answers and visual indicators",
      "acceptanceCriteria": [
        "All questions from Section 1 and Section 2 are displayed in order",
        "Question text is shown if present",
        "Question image is rendered if present",
        "All four options are displayed with their text and images",
        "User's selected answer is visually highlighted",
        "Correct answer is clearly indicated",
        "Correct/incorrect status is shown with visual indicators (green for correct, red for incorrect)",
        "Unanswered questions are marked distinctly"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/ResultPage.tsx",
          "operation": "modify",
          "description": "Add question review section that iterates through all questions from both sections in order. For each question: display question number, render questionText if present, render questionImage if present using img tag, display all four options with their optionText and optionImage. Highlight the user's selected answer with a distinct background color. Indicate the correct answer with a green checkmark icon and green border. For user's answer, show green checkmark if correct or red X icon if incorrect. For unanswered questions, display 'Not Answered' label with gray styling. Use Card components from shadcn/ui for question containers and maintain consistent styling with navy blue theme."
        }
      ]
    },
    {
      "id": "REQ-50",
      "summary": "Display explanation text for each question in the review section",
      "acceptanceCriteria": [
        "Explanation text is displayed below each question's options",
        "Explanation is visible for all questions regardless of whether user answered correctly or incorrectly",
        "Explanation text is formatted for readability"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/ResultPage.tsx",
          "operation": "modify",
          "description": "Add explanation display below the options section for each question. Show the question.explanation text in a clearly marked section (e.g., with 'Explanation:' label) using readable typography. Apply subtle background color or border to distinguish the explanation section from options. Ensure explanation is always visible regardless of whether the user answered correctly, incorrectly, or left it unanswered."
        }
      ]
    },
    {
      "id": "REQ-51",
      "summary": "Add 'Back to Dashboard' button that navigates to StudentDashboard",
      "acceptanceCriteria": [
        "Button labeled 'Back to Dashboard' is displayed on the result page",
        "Clicking the button navigates to /student/dashboard route",
        "Button is styled consistently with the application's design"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/ResultPage.tsx",
          "operation": "modify",
          "description": "Add a 'Back to Dashboard' button near the top or bottom of the result page using Button component from shadcn/ui. On click, navigate to '/student/dashboard' route using TanStack Router's useNavigate hook. Style the button consistently with Concept Delta navy blue theme."
        }
      ]
    },
    {
      "id": "REQ-52",
      "summary": "Add 'View Leaderboard' button that navigates to Leaderboard page with testId parameter",
      "acceptanceCriteria": [
        "Button labeled 'View Leaderboard' is displayed on the result page",
        "Clicking the button navigates to /leaderboard route with testId parameter",
        "Button is styled consistently with the application's design"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/ResultPage.tsx",
          "operation": "modify",
          "description": "Add a 'View Leaderboard' button next to the 'Back to Dashboard' button using Button component from shadcn/ui. On click, navigate to '/leaderboard' route with testId as URL search parameter (e.g., '/leaderboard?testId=123') using TanStack Router's useNavigate hook. Style the button consistently with Concept Delta navy blue theme, potentially as a secondary or outline variant to distinguish it from the primary 'Back to Dashboard' button."
        }
      ]
    }
  ]
}